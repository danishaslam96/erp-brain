{
  "name": "PRO_CHANGE_SALES_ITEM_CODE_MNO",
  "type": "PROCEDURE",
  "line_count": 69,
  "tables_referenced": [
    "DC_DETAIL",
    "LNUM_SODET_ID",
    "SALES_ORDER_MT",
    "DISPATCH_ADVICE_MT",
    "DC_MT",
    "DISPATCH_ADVICE_DET",
    "SALES_ORDER_DET"
  ],
  "body_snippet": "procedure PRO_CHANGE_SALES_ITEM_CODE_MNO(SALE_ORD_NO in NUMBER, SALE_ORD_DATE in DATE,\n                            SALE_BOOK IN NUMBER,SALE_REF_NO IN VARCHAR2,SALE_TYPE IN VARCHAR2,\n                            FROM_ITEM IN NUMBER,TO_ITEM IN NUMBER,DET_LINE_NO IN NUMBER) is\n                            \n                            \nLNUM_SODET_ID   NUMBER(15);\nbegin\n--  BEGIN\n  SELECT  SODET.SALES_ORDER_DET_ID\n  INTO LNUM_SODET_ID\n  FROM SALES_ORDER_MT SOMT,\n  SALES_ORDER_DET SODET\n  WHERE SOMT.SALES_ORDER_ID = SODET.SALES_ORDER_ID\n  AND SOMT.SALES_ORDER_NO = SALE_ORD_NO\n  AND SOMT.ORDER_DATE = SALE_ORD_DATE\n  AND SOMT.SO_REFERENCE_NO = SALE_REF_NO\n  AND SOMT.INV_BOOK_ID = SALE_BOOK\n  AND SODET.SR_NO = DET_LINE_NO;\n--  EXCEPTION \n--  WHEN NO_DATA_FOUND THEN\n--  RETURN;\n--  END;\n  \n  UPDATE  SALES_ORDER_DET SODET\n  SET SODET.ITEM_ID = TO_ITEM,SODET.CUSTOMER_ITEM = TO_ITEM\n  WHERE SODET.SALES_ORDER_DET_ID = LNUM_SODET_ID;\n  \n--------------------------------------------------  \nBEGIN  \n  FOR I IN ( \n  SELECT DADET.DSPCH_ADVCE_DET_ID \n  FROM DISPATCH_ADVICE_MT DAMT,DISPATCH_ADVICE_DET DADET\n  WHERE DAMT.DSPCH_ADVCE_ID = DADET.DSPCH_ADVCE_ID\n  AND DADET.MATCH_WITH_SO_DET_ID = LNUM_SODET_ID\n  AND DAMT.MATCH_WITH = 'S')  LOOP\n\n\n  UPDATE DISPATCH_ADVICE_DET DADET\n  SET DADET.ITEM_ID = TO_ITEM\n  WHERE DADET.DSPCH_ADVCE_DET_ID = I.DSPCH_ADVCE_DET_ID;\n  \n  \n  FOR J IN (\n  SELECT DCDET.DC_DET_ID\n  FROM \n  DC_MT DCMT,DC_DETAIL DCDET\n  WHERE DCMT.DC_ID = DCDET.DC_ID\n  AND DCDET.MATCH_WITH_ID "
}