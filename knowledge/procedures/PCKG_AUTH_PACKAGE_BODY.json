{
  "name": "PCKG_AUTH",
  "type": "PACKAGE BODY",
  "line_count": 155,
  "tables_referenced": [
    "AUTH_MT",
    "LNUM_INITIAL_STAT_ID",
    "ALL",
    "GL_GEN_PREFERENCES",
    "GNUM_NA_AUTH_STATUS_ID",
    "INV_BOOKS_MT",
    "LNUM_AUTH_ENABLE_YN"
  ],
  "body_snippet": "PACKAGE BODY PCKG_AUTH IS\n\n  GNUM_NA_AUTH_STATUS_ID NUMBER(14);\n\n  FUNCTION GET_NA_AUTH_STATUS_ID RETURN NUMBER IS\n\n  BEGIN\n    IF GNUM_NA_AUTH_STATUS_ID IS NULL THEN\n      SELECT G.N_A_AUTH_STATUS_ID\n        INTO GNUM_NA_AUTH_STATUS_ID\n        FROM GL_GEN_PREFERENCES G;\n    END IF;\n    RETURN(GNUM_NA_AUTH_STATUS_ID);\n  END;\n\n  FUNCTION GET_REPORT_PASSWORD RETURN VARCHAR2 IS\n  BEGIN\n    RETURN(REPORT_PASSWORD);\n  END;\n\n  -- this PROCEDURE IS called FROM ALL authorizational transactions\n  PROCEDURE GET_INITIAL_AUTHORIZATION(PARM_FOR            VARCHAR2,\n                                      PARM_INV_BOOK_ID    IN NUMBER,\n                                      PARM_AUTH_STATUS_ID OUT NUMBER,\n                                      PARM_AUTH_YN        OUT NUMBER) IS\n    --parm_for       A -> Trigger on Auth_MT\n    --               T -> TRANSACTIONAL TRIGGER / FORM\n    LNUM_AUTH_ENABLE_YN  NUMBER(1);\n    LNUM_INITIAL_STAT_ID NUMBER(14);\n    LNUM_NA_STAT_ID      NUMBER(14);\n\n  BEGIN\n    SELECT IB.ENABLE_AUTH_YN\n      INTO LNUM_AUTH_ENABLE_YN\n      FROM INV_BOOKS_MT IB\n     WHERE IB.INV_BOOK_ID = PARM_INV_BOOK_ID;\n\n    SELECT G.INIT_AUTH_STAT_FOR_TRANS_MT, G.N_A_AUTH_STATUS_ID\n      INTO LNUM_INITIAL_STAT_ID, LNUM_NA_STAT_ID\n      FROM GL_GEN_PREFERENCES G;\n\n    IF LNUM_AUTH_ENABLE_YN = 1 THEN\n      PARM_AUTH_STATUS_ID := LNUM_INITIAL_STAT_ID;\n      PARM_AUTH_YN        := 0;\n    ELSE\n      PARM_AUTH_STATUS_ID := LNUM_NA_STAT_ID;\n      PARM_AUTH_YN        := 1;\n    END IF;\n  END;\n\n  PR"
}