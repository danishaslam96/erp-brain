{
  "name": "PRO_GEN_LINK_CONTRCT_RAW_MAT",
  "type": "PROCEDURE",
  "line_count": 71,
  "tables_referenced": [
    "SGD_LINK_CONT_RAW_MAT_DT",
    "PLAN_RAW_EXIST",
    "SGD_SAMPLE_RAW_MATERIALS_DET",
    "SGD_LINK_CONT_RAW_MAT_MT",
    "SGD_SAMPLE_RAW_MATERIALS_MT"
  ],
  "body_snippet": "procedure pro_gen_Link_Contrct_raw_mat(parm_sample_det_id number,\n                                                       parm_plan_det_id   number,\n                                                       parm_KNIT_CONTRACT_DT_ID number) is\n  lnm_MATERIAL_ID     number(14);\n  lnm_plan_raw_det_id number(14);\n  plan_raw_exist      number;\nbegin\n\n  select count(1)\n    into plan_raw_exist\n    from SGD_link_CONT_RAW_MAT_MT m\n   where m.KNIT_CONTRACT_DT_ID = nvl(parm_KNIT_CONTRACT_DT_ID,0);\n\n/*Raise_application_error(-20001, 'parm_KNIT_CONTRACT_DT_ID '||parm_KNIT_CONTRACT_DT_ID||' parm_plan_det_id '\n||parm_plan_det_id||' parm_sample_det_id '||parm_sample_det_id);*/\n\n   if plan_raw_exist  = 0 and  nvl(parm_plan_det_id,0) <>0 then\n  for cur in (select distinct mt.material_id,\n                     mt.item_id,\n                     mt.greige_quantity,\n                     mt.greige_waste,\n                     mt.waste_perc,\n                     mt.pd_yn,\n                     mt.prd_waste_perc\n                from sgd_sample_raw_materials_mt mt,sgd_sample_raw_materials_det dtt\n                 where   mt.material_id = dtt.material_id\n                   and dtt.raw_material_id = 18\n                   and  mt.sample_request_det_id = parm_sample_det_id) loop\n\n    lnm_MATERIAL_ID := get_single_primary_key('SGD_link_CONT_RAW_MAT_MT',\n                                              'LINK_MATERIAL_ID');\n\n    insert into SGD_link_CONT_RAW_MAT_MT\n      (LINK_MATERIAL_ID ,\n       KNIT_CONTRACT_DT_ID,\n"
}