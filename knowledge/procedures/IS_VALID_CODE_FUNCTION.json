{
  "name": "IS_VALID_CODE",
  "type": "FUNCTION",
  "line_count": 90,
  "tables_referenced": [],
  "body_snippet": "FUNCTION IS_VALID_CODE(STRCT NUMBER,CODE VARCHAR2) RETURN VARCHAR2 IS\n\n\n-------------------------------------------------------------------------------------------\n-------------------------------------------------------------------------------------------\n------- THIS FUNCTION VALIDATES THE GIVEN CODE FOR EXISTANCE AND DEPENDENCY\n------- THIS WILL RETURN A STRING OF ALL SEGMENT IDs USED IN GIVEN CODE SEPARATED BY \",\"\n------- IF THE VALIDATION FAILS IT WILL RETURN A NUMBER SHOWING THE ERROR\n------- IT WILL RETURN \t\n--VARCHAR2 TYPE ID STRING\t->\tON SUCCESS\n-------\t\t\t\t\t\t\t\t\t-1\t->\tIF ANY SEGMENT IS NOT DEFINED\n-------\t\t\t\t\t\t\t\t\t-2 ->  IF SEGMENT VALUE IS NOT VALID\n-------\t\t\t\t\t\t\t\t\t-3 ->  IF ANY OF THE SEGMENT IS PARENT\n-------\t\t\t\t\t\t\t\t\t-4 ->  IF ANY SEGMENT VALUE IS VIOLATING DEPENDENCY\n------------------------------------------------------------------------------------------\n-------------------------------------------------------------------------------------------\n\n\n    ST NUMBER:=0;\n    EN NUMBER:=0;\n    \n    CH VARCHAR2(500);\n    TOT_SEG NUMBER:=0;\n    TMP VARCHAR2(500);\n    DEP VARCHAR2(500);\n    DEP_ON_KEY_ID NUMBER;\n    SEGMENT_ID NUMBER;\n    SEGMENT_ID_STRING VARCHAR2(200):='';\n    LVNUM_TMP NUMBER;\n    \n    SEGMENT_VALUE_NOT_FOUND EXCEPTION;\n    SEGMENT_IS_PARENT       EXCEPTION;\n    INVALID_SEGMENT\t\t\t\t\tEXCEPTION;\n    INVALID_SEGMENT_DEPENDENCY EXCEPTION;\n\nBEGIN\n\n \tTOT_SEG:=HOW_MANY_CHARS(CODE,'-')+1;\n\t\n  FOR  SEG IN REVERSE 1..TOT_SEG LOOP\n \t\n/* \t \t\tIF SEG=TOT_SEG THEN\n \t \t\t\t"
}