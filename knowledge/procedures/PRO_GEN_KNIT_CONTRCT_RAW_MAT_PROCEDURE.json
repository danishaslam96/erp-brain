{
  "name": "PRO_GEN_KNIT_CONTRCT_RAW_MAT",
  "type": "PROCEDURE",
  "line_count": 78,
  "tables_referenced": [
    "PLAN_RAW_EXIST",
    "SGD_SAMPLE_RAW_MATERIALS_DET",
    "SGD_CMT_KNIT_CONTRACT_MT",
    "SGD_KNIT_CONT_RAW_MAT_DT",
    "SGD_KNIT_CONT_RAW_MAT_MT",
    "LNM_PROD_WASTE_ALLOWANCE",
    "SGD_SAMPLE_RAW_MATERIALS_MT"
  ],
  "body_snippet": "procedure pro_gen_knit_Contrct_raw_mat(parm_sample_det_id number,\n                                                       parm_plan_det_id   number,\n                                                       parm_KNIT_CONTRACT_DT_ID number) is\n  lnm_MATERIAL_ID     number(14);\n  lnm_plan_raw_det_id number(14);\n  plan_raw_exist      number;\n  lnm_prod_waste_allowance  number;\nbegin\n\n  select count(1)\n    into plan_raw_exist\n    from SGD_KNIT_CONT_RAW_MAT_MT m\n   where m.knit_contract_dt_id = nvl(parm_KNIT_CONTRACT_DT_ID,0);\n\n\n   if plan_raw_exist  = 0 and  nvl(parm_plan_det_id,0) <>0 then\n  for cur in (select distinct mt.material_id,\n                     mt.item_id,\n                     mt.greige_quantity,\n                     mt.greige_waste,\n                     mt.waste_perc,\n                     mt.pd_yn,\n                     mt.prd_waste_perc\n                from sgd_sample_raw_materials_mt mt,sgd_sample_raw_materials_det dtt\n                 where   mt.material_id = dtt.material_id\n                /*   and dtt.raw_material_id = 18*/\n                   and  mt.sample_request_det_id = parm_sample_det_id) loop\n\n  select distinct nvl(m.prod_waste_allowance,0)\n    into lnm_prod_waste_allowance\n    from sgd_cmt_knit_contract_mt m, sgd_cmt_knit_contract_dt d\n   where m.knit_contract_id = d.knit_contract_id\n   and  d.knit_contract_dt_id = nvl(parm_KNIT_CONTRACT_DT_ID,0);\n\n    lnm_MATERIAL_ID := get_single_primary_key('SGD_KNIT_CONT_RAW_MAT_MT',\n                                       "
}